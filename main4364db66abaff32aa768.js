!function(e){function r(r){for(var n,a,s=r[0],c=r[1],u=r[2],p=0,f=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(l&&l(r);f.length;)f.shift()();return o.push.apply(o,u||[]),t()}function t(){for(var e,r=0;r<o.length;r++){for(var t=o[r],n=!0,s=1;s<t.length;s++){var c=t[s];0!==i[c]&&(n=!1)}n&&(o.splice(r--,1),e=a(a.s=t[0]))}return e}var n={},i={0:0},o=[];function a(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=n,a.d=function(e,r,t){a.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,r){if(1&r&&(e=a(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)a.d(t,n,function(r){return e[r]}.bind(null,n));return t},a.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(r,"a",r),r},a.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=r,s=s.slice();for(var u=0;u<s.length;u++)r(s[u]);var l=c;o.push([122,1]),t()}({122:function(e,r,t){t(123),t(310),e.exports=t(309)},309:function(e,r,t){},310:function(e,r,t){"use strict";function n(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return t}(e,r)||a(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){if(e){if("string"==typeof e)return s(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,r):void 0}}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function c(e,r,t,a){var s,c=null;try{c=document.createElement(e)}catch(e){throw new Error("Unable to create HTMLElement! Give a proper tag name")}r&&(s=c.classList).add.apply(s,o(r.split(" "))),t&&Array.isArray(t)?t.forEach((function(e){return e&&c.appendChild(e)})):t&&"object"===i(t)?c.appendChild(t):t&&"string"==typeof t&&(c.innerHTML=t),a&&a.appendChild(c);for(var u=arguments.length,l=new Array(u>4?u-4:0),p=4;p<u;p++)l[p-4]=arguments[p];return l.length&&l.forEach((function(e){var r=n(e,2),t=r[0],i=r[1];""===i&&c.setAttribute(t,""),t.match(/value|id|autofocus|autocomplete|src|placeholder|alt|href/)?c.setAttribute(t,i):c.dataset[t]=i})),c}t.r(r);var u=t(121),l="trnsl.1.1.20200510T122738Z.273931b056655f19.73c8ecb8b6405004ee5f66df4289f7fc6406882f";function p(e,r,t,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void t(e)}s.done?r(c):Promise.resolve(c).then(n,i)}function f(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var o=e.apply(r,t);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)}))}}var d="https://www.omdbapi.com/?apikey=".concat("f1a077ba"),h="https://translate.yandex.net/api/v1.5/tr.json/translate?key=".concat(l),v=function(e,r){return f(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(d,"&s=").concat(e,"&page=").concat(r),t.next=3,fetch(n);case 3:return i=t.sent,t.next=6,i.json();case 6:return o=t.sent,t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})))()},b=function(e){return f(regeneratorRuntime.mark((function r(){var t,n,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t="".concat(d,"&i=").concat(e),r.next=3,fetch(t);case 3:return n=r.sent,r.next=6,n.json();case 6:return i=r.sent,r.abrupt("return",i);case 8:case"end":return r.stop()}}),r)})))()},m=function(e){return f(regeneratorRuntime.mark((function r(){var t,n,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t="".concat(h,"&text=").concat(e,"&lang=ru-en"),r.next=3,fetch(t);case 3:return n=r.sent,r.next=6,n.json();case 6:return i=r.sent,r.abrupt("return",i.text[0]);case 8:case"end":return r.stop()}}),r)})))()};function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){g(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function g(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function x(e,r,t,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void t(e)}s.done?r(c):Promise.resolve(c).then(n,i)}function O(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var o=e.apply(r,t);function a(e){x(o,n,i,a,s,"next",e)}function s(e){x(o,n,i,a,s,"throw",e)}a(void 0)}))}}var P={container:null,wrapper:null,swiper:null,searchText:null,page:1,init:function(e){this.wrapper=c("div","movies__wrapper swiper-wrapper"),this.container=c("div","movies swiper-container",[this.wrapper,c("div","swiper-pagination"),c("div","swiper-button-prev"),c("div","swiper-button-next")],e),this.addHandlers()},clearWrapper:function(){this.wrapper.innerHTML=""},addHandlers:function(){var e=this;this.container.querySelector(".swiper-button-next").addEventListener("click",this.checkProgressSlides),this.container.querySelector(".swiper-wrapper").addEventListener("mouseup",(function(){e.checkProgressSlides()})),this.container.querySelector(".swiper-wrapper").addEventListener("touchend",(function(){e.checkProgressSlides()})),this.container.querySelector(".swiper-pagination").addEventListener("click",(function(r){r.target.classList.contains("swiper-pagination-bullet")&&e.checkProgressSlides()}))},checkProgressSlides:function(){var e=this;return O(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:console.log(e.swiper.progress),(e.swiper.progress>.6&&e.swiper.slides.length<30||e.swiper.progress>.8)&&e.loadManyMovies();case 2:case"end":return r.stop()}}),r)})))()},loadManyMovies:function(){var e=this;return O(regeneratorRuntime.mark((function r(){var t,n,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.page+=1,r.next=3,v(e.searchText,e.page);case 3:if(!(t=r.sent).Search){r.next=10;break}return n=t.Search.map(function(){var e=O(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(r.imdbID);case 2:return t=e.sent,e.abrupt("return",w(w({},r),{},{Rate:t.imdbRating}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),r.next=8,Promise.all(n);case 8:i=r.sent,e.setMovies(i);case 10:case"end":return r.stop()}}),r)})))()},setSearchTextAndPage:function(e){this.searchText=e,this.page=1},setMovies:function(e){var r=this;e.forEach((function(e){var t="N/A"===e.Poster?"https://748073e22e8db794416a-cc51ef6b37841580002827d4d94d19b6.ssl.cf3.rackcdn.com/not-found.png":e.Poster;c("div","movies__element swiper-slide",[c("h2","movies__title",c("a",null,e.Title,null,["href","https://www.imdb.com/title/".concat(e.imdbID,"/videogallery/")])),c("div","movies__img",c("img",null,null,null,["src",t],["alt",e.Title])),c("div","movies__year",e.Year),c("div","movies__rate",e.Rate)],r.wrapper)})),null===this.swiper?this.swiper=new u.a(".swiper-container",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:4,slidesPerGroup:4,spaceBetween:20,pagination:{el:".swiper-pagination",clickable:!0},setWrapperSize:!0,breakpoints:{320:{slidesPerView:1,slidesPerGroup:1},480:{slidesPerView:2,spaceBetween:30,slidesPerGroup:2},640:{slidesPerView:3,spaceBetween:35,slidesPerGroup:3},1024:{slidesPerView:4,spaceBetween:40}}}):this.swiper.update()}};function _(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function j(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?_(Object(t),!0).forEach((function(r){S(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function S(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function k(e,r,t,n,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void t(e)}s.done?r(c):Promise.resolve(c).then(n,i)}function R(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var o=e.apply(r,t);function a(e){k(o,n,i,a,s,"next",e)}function s(e){k(o,n,i,a,s,"throw",e)}a(void 0)}))}}var M={value:"",field:null,clearBtn:null,button:null,spinner:null,errorBox:null,isLoading:!1,init:function(e){this.field=c("input","search__field",null,null,["placeholder","Search movie"],["autocomplete","off"],["autofocus",""]),this.clearBtn=c("div","search__clear-btn","Clear",null),this.button=c("button","search__btn","Search",null,["type","submit"]),this.spinner=c("div","search__spinner search__spinner_hide",c("div","loader"));var r=c("div","search__box",[this.field,this.spinner,this.clearBtn,this.button]);this.errorBox=c("div","search__err"),c("div","search",[r,this.errorBox],e),this.addHandlers()},addHandlers:function(){var e=this;this.field.addEventListener("input",(function(r){e.value=r.target.value})),this.field.addEventListener("keyup",(function(r){"Enter"===r.code&&(e.page=1,e.getMovies(e.value))})),this.button.addEventListener("click",(function(){e.page=1,e.getMovies(e.value)})),this.clearBtn.addEventListener("click",(function(){e.value="",e.field.value=""}))},getMovies:function(e){var r=this;return R(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.isLoading||""===e){t.next=26;break}if(n=e,!/[а-я]/i.test(e)){t.next=6;break}return t.next=5,m(e);case 5:n=t.sent;case 6:return P.clearWrapper(),r.isLoading=!0,r.spinner.classList.remove("search__spinner_hide"),P.container.classList.add("movies_hide"),t.next=12,v(n,1);case 12:if(i=t.sent,r.isLoading=!1,r.spinner.classList.add("search__spinner_hide"),!i.Search){t.next=25;break}return t.next=18,r.getMoviesRate(i.Search);case 18:o=t.sent,P.setSearchTextAndPage(n),P.setMovies(o),r.errorBox.innerHTML="Showing results for ".concat(n),P.container.classList.remove("movies_hide"),t.next=26;break;case 25:r.errorBox.innerHTML="No results for ".concat(n);case 26:case"end":return t.stop()}}),t)})))()},getMoviesRate:function(e){return R(regeneratorRuntime.mark((function r(){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.map(function(){var e=R(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(r.imdbID);case 2:return t=e.sent,e.abrupt("return",j(j({},r),{},{Rate:t.imdbRating}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),r.next=3,Promise.all(t);case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))()}};window.onload=function(){var e,r,t=c("div","content"),n=c("div","wrapper");e=n,r=c("a","header__logo","Movie search",null,["href","/"]),c("header","header",r,e),M.init(t),P.init(t),M.getMovies("Dream"),n.append(t),function(e){var r=c("a","footer__github-link","doxideniss",null,["href","https://github.com/doxideniss"]);c("footer","footer",[c("div","footer__copyright","RS School 2020q1"),c("div","footer__github",r)],e)}(n),document.body.append(n)}}});